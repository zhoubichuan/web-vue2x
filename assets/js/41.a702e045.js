(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{781:function(s,t,a){"use strict";a.r(t);var e=a(2),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"代码管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码管理"}},[s._v("#")]),s._v(" 代码管理")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("前言")]),s._v(" "),t("p",[s._v("前端开发中对代码的处理：代码的存储、代码的管控、代码的提交与合并")])]),s._v(" "),t("h2",{attrs:{id:"_1-代码仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-代码仓库"}},[s._v("#")]),s._v(" 1.代码仓库")]),s._v(" "),t("p",[s._v("以gitlab 为例")]),s._v(" "),t("ul",[t("li",[s._v("配置 ssh")]),s._v(" "),t("li",[s._v("权限")])]),s._v(" "),t("h2",{attrs:{id:"_2-代码管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-代码管理"}},[s._v("#")]),s._v(" 2.代码管理")]),s._v(" "),t("ul",[t("li",[s._v("简单项目分支\n"),t("ul",[t("li",[s._v("dev:开发分支，直接在 dev 上进行开发，测试环境没问题，合并到 prod")]),s._v(" "),t("li",[s._v("prod:生产分支")])])]),s._v(" "),t("li",[s._v("复杂项目分支\n"),t("ul",[t("li",[s._v("dev:开发分支，需求开发时使用自己名称创建各自开发分支【name】dev")]),s._v(" "),t("li",[s._v("【name】dev:开发者的开发分支，需求开发完成合并到 dev")]),s._v(" "),t("li",[s._v("prod:生产分支")])])])]),s._v(" "),t("h2",{attrs:{id:"_3-代码提交"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-代码提交"}},[s._v("#")]),s._v(" 3.代码提交")]),s._v(" "),t("p",[s._v("这里直接使用"),t("code",[s._v("GitLens")]),s._v("插件来管理代码的提交："),t("strong",[t("code",[s._v("dev")]),s._v("开发分支，"),t("code",[s._v("master")]),s._v("主分支，现在"),t("code",[s._v("dev")]),s._v("开发完成，需要合并到"),t("code",[s._v("master")])])]),s._v(" "),t("ul",[t("li",[s._v("1.在 vscode 中安装代码提交工具"),t("code",[s._v("GitLens")]),s._v("插件")]),s._v(" "),t("li",[s._v("2.重启 vscode 就可以使用"),t("code",[s._v("GitLens")]),s._v("管理代码")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.jianshu.com/p/95a1a06ac0fb",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考教程"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"_3-1-代码提交"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-代码提交"}},[s._v("#")]),s._v(" 3.1 代码提交")]),s._v(" "),t("p",[t("kbd",[s._v("普通提交")])]),s._v(" "),t("ul",[t("li",[s._v("1.为防止直接提交有冲突产生，可以先将"),t("code",[s._v("1.本地代码储藏")]),s._v("，然后"),t("code",[s._v("2.拉取代码")]),s._v("，然后"),t("code",[s._v("3.弹出储藏")]),s._v("将暂存的代码合并，有冲突解决冲突后再提交")])]),s._v(" "),t("p",[t("kbd",[s._v("多分支提交")]),s._v("：同一个 bug 需要提交不同的分支维护，但是每个分支代码不一定相同，代码量如果比较多，容易出现问题")]),s._v(" "),t("ul",[t("li",[s._v("1.修改好一个分支代码提交后，"),t("code",[s._v("1.拷贝")]),s._v("相同的文件在目录中"),t("code",[s._v("2.储藏")]),s._v("，然后"),t("code",[s._v("3.切换目标分支")]),s._v("，"),t("code",[s._v("4.弹出储藏")]),s._v("，对比两个文件，修改相关内容，删除之前拷贝的文件")])]),s._v(" "),t("h3",{attrs:{id:"_3-2-创建分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-创建分支"}},[s._v("#")]),s._v(" 3.2 创建分支")]),s._v(" "),t("h3",{attrs:{id:"_3-3-切换分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-切换分支"}},[s._v("#")]),s._v(" 3.3 切换分支")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_3-4-分支合并"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-分支合并"}},[s._v("#")]),s._v(" 3.4 分支合并")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("1.将 master 代码更新")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull origin master\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("2.将 master 合并到 dev")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout dev\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge master\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("3.将 dev 合并到 master")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'代码提交'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# （有冲突解决冲突）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" dev\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"_3-5-临时存藏"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-临时存藏"}},[s._v("#")]),s._v(" 3.5 临时存藏")]),s._v(" "),t("ul",[t("li",[s._v("有些功能代码暂时不确定是否要合并到代码中、自己的一些测试代码、写了一半功能的代码、此版本不需要提交的代码")])]),s._v(" "),t("h3",{attrs:{id:"_3-6-代码比较"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-代码比较"}},[s._v("#")]),s._v(" 3.6 代码比较")]),s._v(" "),t("h3",{attrs:{id:"_3-7-代码回退"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-代码回退"}},[s._v("#")]),s._v(" 3.7 代码回退")]),s._v(" "),t("p",[s._v("需求变动频繁经常会用到的一个场景")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("方式一：反向提交")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("情况 1：当代码已经 commit 但没有 push 时，可使用如下命令操作（"),t("strong",[s._v("仓库没有提交记录")]),s._v("）")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" revert HEAD //撤销倒数第一次提交\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" revert HEAD^ //撤销倒数第二次提交\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" revert HEAD~2 //撤销倒数第三次提交\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" revert commit //（比如：fa042ce57ebbe5bb9c8db709f719cec2c58ee7ff）撤销指定的版本，撤销也会作为一次提交进\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("情况 2：当代码已经 commit 并 push 时，可使用如下命令（"),t("strong",[s._v("仓库有提交记录")]),s._v("）")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" revert HEAD~1 //代码回退到前一个版本\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("方式二：删除提交")])]),s._v(" "),t("ul",[t("li",[s._v("情况 1：如果我们的有两次 commit 但是没有 push 代码（"),t("strong",[s._v("仓库没有提交记录")]),s._v("）"),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset HEAD~1      //撤销前一次 commit，所有代码回到 Working Copy\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[s._v("情况 2：假如我们有几次代码修改，并且都已经 push 到了版本库中（"),t("strong",[s._v("仓库没有提交记录")]),s._v("）"),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--hard")]),s._v(" HEAD~2   //本地的Wroking Copy回退到2个版本之前\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])])])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("总结")]),s._v(" "),t("p",[s._v("git 相关使用在项目中还是比较重要的，熟练掌握代码的提交、回退、分支切换能轻松应对复杂的频繁的需求开发")])])])}),[],!1,null,null,null);t.default=r.exports}}]);