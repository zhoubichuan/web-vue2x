(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{859:function(s,t,a){"use strict";a.r(t);var n=a(2),v=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"vue-微前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-微前端"}},[s._v("#")]),s._v(" Vue 微前端")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("前言")]),s._v(" "),t("p",[s._v("微前端就是将不同的功能按照不同的维度拆分成多个子应用。通过主应用来加载这些子应用。")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("微前端的好处")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("应用自治")]),s._v("：独立开发、独立测试、独立部署 微应用仓库独立，前后端可独立开发，部署完成后主框架自动完成同步更新，只需要遵循统一的接口规范或者框架，以便于系统集成到一起，相互之间是不存在依赖关系的")]),s._v(" "),t("li",[t("strong",[s._v("单一职责")]),s._v("：每个前端应用可以只关注于自己所需要完成的功能")]),s._v(" "),t("li",[t("strong",[s._v("技术栈无关")]),s._v("：主框架不限制接入应用的技术栈，微应用具备完全自主权，你可以使用 Angular 的同时，又可以使用 React 和 Vue。可以尝试新的技术")]),s._v(" "),t("li",[t("strong",[s._v("独立运行时")]),s._v("：每个微应用之间状态隔离，运行时状态不共享，无需重新构建即可添加、移除或替换单个前端部分")]),s._v(" "),t("li",[s._v("简单、松耦合的代码库")])])]),s._v(" "),t("li",[t("p",[s._v("微前端的缺点")]),s._v(" "),t("ul",[t("li",[s._v("用户体验变差")]),s._v(" "),t("li",[s._v("应用的拆分基础依赖于基础设施的构建，一旦大量应用依赖于同一基础设施，那么维护变成了一个挑战。")]),s._v(" "),t("li",[s._v("拆分的粒度越小，便意味着架构变得复杂、维护成本变高。管理多个版本，复用公共组件等")]),s._v(" "),t("li",[s._v("技术栈一旦多样化，便意味着技术栈混乱。")]),s._v(" "),t("li",[s._v("目前现有微前端方案并不完美")])])])]),s._v(" "),t("h2",{attrs:{id:"微前端方案对比"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#微前端方案对比"}},[s._v("#")]),s._v(" 微前端方案对比")]),s._v(" "),t("ul",[t("li",[s._v("iframe\n"),t("ul",[t("li",[s._v("加载太慢")]),s._v(" "),t("li",[s._v("用户体验太差")]),s._v(" "),t("li",[s._v("完美 js/css 沙箱，无需子应用配合")])])]),s._v(" "),t("li",[s._v("single-spa\n"),t("ul",[t("li",[s._v("没有沙箱")]),s._v(" "),t("li",[s._v("上手成本很高")]),s._v(" "),t("li",[s._v("文档和插件完善")])])]),s._v(" "),t("li",[s._v("模块联邦\n"),t("ul",[t("li",[s._v("需要 webpack5")]),s._v(" "),t("li",[s._v("没有沙箱")]),s._v(" "),t("li",[s._v("使用场景有限")])])])]),s._v(" "),t("h2",{attrs:{id:"_1-singlespa"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-singlespa"}},[s._v("#")]),s._v(" 1.singlespa")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("前言")]),s._v(" "),t("p",[t("strong",[s._v("Single-spa 是一个将多个单页面应用聚合为一个整体应用的 JavaScript 微前端框架，"),t("a",{attrs:{href:"https://zh-hans.single-spa.js.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考文档"),t("OutboundLink")],1)])])]),s._v(" "),t("ul",[t("li",[s._v("1."),t("code",[s._v("singlespa")]),s._v("在项目中的使用")]),s._v(" "),t("li",[s._v("2."),t("code",[s._v("singlespa")]),s._v("源码解析")])]),s._v(" "),t("h2",{attrs:{id:"_2-qiankun"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-qiankun"}},[s._v("#")]),s._v(" 2.qiankun")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("前言")]),s._v(" "),t("p",[t("strong",[s._v("qiankun 是一个基于 single-spa 的微前端实现库，旨在帮助大家能更简单、无痛的构建一个生产可用微前端架构系统，"),t("a",{attrs:{href:"https://qiankun.umijs.org/zh/guide",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考文档"),t("OutboundLink")],1)])])]),s._v(" "),t("ul",[t("li",[s._v("1."),t("code",[s._v("qiankun")]),s._v("在项目中的使用")]),s._v(" "),t("li",[s._v("2."),t("code",[s._v("qiankun")]),s._v("源码解析")])]),s._v(" "),t("p",[s._v("微前端的优缺点")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("qiankun")]),s._v(" "),t("ul",[t("li",[s._v("基于 single-spa")]),s._v(" "),t("li",[s._v("有 js/css 沙箱，但沙箱存在缺陷")]),s._v(" "),t("li",[s._v("经过大量项目实践，可参考的案例较多")])])]),s._v(" "),t("li",[t("p",[s._v("MicroApp")]),s._v(" "),t("ul",[t("li",[s._v("使用简单，子应用改动更少")]),s._v(" "),t("li",[s._v("没有经过大量的项目实践")]),s._v(" "),t("li",[s._v("qiankun 有的功能他基本上都有")])])])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("qiankun + vue 遇到的问题")]),s._v(" "),t("ul",[t("li",[s._v("沙箱导致 vue 性能问题")]),s._v(" "),t("li",[s._v("vue-router4 有一些不兼容")]),s._v(" "),t("li",[s._v("vite 只能曲线救国")]),s._v(" "),t("li",[s._v("css 沙箱不完美")])])]),s._v(" "),t("h2",{attrs:{id:"_3-代码共享"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-代码共享"}},[s._v("#")]),s._v(" 3.代码共享")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("前言")]),s._v(" "),t("p",[s._v("多个项目中处理公共子模块（微前端各个子项目中相同的组件、方法、配置、一些图片、字体静态资源等），一般有三种方案:npm、cdn、git submodule")])]),s._v(" "),t("h2",{attrs:{id:"_4-nginx-部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-nginx-部署"}},[s._v("#")]),s._v(" 4.nginx 部署")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  listen       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  server_name  localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n  location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    root   html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    index  index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    try_files "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/ /index.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n  location /app1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    root   html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    index  index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    try_files "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/ /app1/index.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n  location /app2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    root   html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    index  index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    try_files "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/ /app2/index.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("h2",{attrs:{id:"_5-微前端的现状"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-微前端的现状"}},[s._v("#")]),s._v(" 5.微前端的现状")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("微前端的方案越来越多，但是微前端缺少一个公共标准")])]),s._v(" "),t("li",[t("p",[s._v("很多公司已经开始尝试微前端，但是体验并不好")])]),s._v(" "),t("li",[t("p",[s._v("微前端的展望：")]),s._v(" "),t("ul",[t("li",[s._v("原生 js 沙箱正在路上：shadowrealm")]),s._v(" "),t("li",[s._v("microApp 解决了,qiankun 子应用侵入性强的问题")]),s._v(" "),t("li",[s._v("qiankun3 已经在路上")])])])])])}),[],!1,null,null,null);t.default=v.exports}}]);