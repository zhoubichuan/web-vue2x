<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>静态页面（编码技巧） | Vue2.x学习笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/web-vue2x/home.svg">
    <link rel="manifest" href="/web-vue2x/manifest.json">
    <script src="/web-vue2x/dll/vendor.dll.js"></script>
    <script src="https://webapi.amap.com/maps?v=2.0&amp;key=46c9ed4e2d25a0e0ee7c883fd5b1a0c8"></script>
    <script src="https://webapi.amap.com/ui/1.1/main.js?v=1.1.1"></script>
    <meta name="description" content="个人总结的vuepress学习技术文档-语法">
    <meta name="keywords" content="vuepress,最新技术文档,vuepress语法,markdown语法">
    
    <link rel="preload" href="/web-vue2x/assets/css/0.styles.d48c8f36.css" as="style"><link rel="preload" href="/web-vue2x/assets/js/app.d33bf4a8.js" as="script"><link rel="preload" href="/web-vue2x/assets/js/2.3759f209.js" as="script"><link rel="preload" href="/web-vue2x/assets/js/38.eef657f2.js" as="script"><link rel="preload" href="/web-vue2x/assets/js/10.ac4b1276.js" as="script"><link rel="prefetch" href="/web-vue2x/assets/js/100.f8de94bb.js"><link rel="prefetch" href="/web-vue2x/assets/js/101.9626a588.js"><link rel="prefetch" href="/web-vue2x/assets/js/102.76589ddb.js"><link rel="prefetch" href="/web-vue2x/assets/js/103.af9cc435.js"><link rel="prefetch" href="/web-vue2x/assets/js/104.4f2cceab.js"><link rel="prefetch" href="/web-vue2x/assets/js/105.77da54fd.js"><link rel="prefetch" href="/web-vue2x/assets/js/106.aa9345d1.js"><link rel="prefetch" href="/web-vue2x/assets/js/107.f4c7c940.js"><link rel="prefetch" href="/web-vue2x/assets/js/108.3e7be8fb.js"><link rel="prefetch" href="/web-vue2x/assets/js/109.cb4d8b20.js"><link rel="prefetch" href="/web-vue2x/assets/js/11.a9919755.js"><link rel="prefetch" href="/web-vue2x/assets/js/110.bb7df8a3.js"><link rel="prefetch" href="/web-vue2x/assets/js/111.00fd5f95.js"><link rel="prefetch" href="/web-vue2x/assets/js/112.901ffc3d.js"><link rel="prefetch" href="/web-vue2x/assets/js/113.24862120.js"><link rel="prefetch" href="/web-vue2x/assets/js/114.ac360758.js"><link rel="prefetch" href="/web-vue2x/assets/js/115.9b0ce599.js"><link rel="prefetch" href="/web-vue2x/assets/js/116.079ee561.js"><link rel="prefetch" href="/web-vue2x/assets/js/117.34027215.js"><link rel="prefetch" href="/web-vue2x/assets/js/118.78a00772.js"><link rel="prefetch" href="/web-vue2x/assets/js/119.7c39974b.js"><link rel="prefetch" href="/web-vue2x/assets/js/12.e359bba6.js"><link rel="prefetch" href="/web-vue2x/assets/js/120.3572141c.js"><link rel="prefetch" href="/web-vue2x/assets/js/121.67c61668.js"><link rel="prefetch" href="/web-vue2x/assets/js/122.053bdb7e.js"><link rel="prefetch" href="/web-vue2x/assets/js/123.63d1ebbd.js"><link rel="prefetch" href="/web-vue2x/assets/js/124.2ec8980f.js"><link rel="prefetch" href="/web-vue2x/assets/js/125.ae95e591.js"><link rel="prefetch" href="/web-vue2x/assets/js/126.af37a3a9.js"><link rel="prefetch" href="/web-vue2x/assets/js/127.a136eb03.js"><link rel="prefetch" href="/web-vue2x/assets/js/128.972c2397.js"><link rel="prefetch" href="/web-vue2x/assets/js/129.8cab7101.js"><link rel="prefetch" href="/web-vue2x/assets/js/13.ce98738d.js"><link rel="prefetch" href="/web-vue2x/assets/js/130.7f7470d9.js"><link rel="prefetch" href="/web-vue2x/assets/js/131.2078dccf.js"><link rel="prefetch" href="/web-vue2x/assets/js/132.3037fcee.js"><link rel="prefetch" href="/web-vue2x/assets/js/133.61296900.js"><link rel="prefetch" href="/web-vue2x/assets/js/134.806d88b7.js"><link rel="prefetch" href="/web-vue2x/assets/js/135.d7bca918.js"><link rel="prefetch" href="/web-vue2x/assets/js/136.5f227e6e.js"><link rel="prefetch" href="/web-vue2x/assets/js/137.f2b4c0a2.js"><link rel="prefetch" href="/web-vue2x/assets/js/138.4fc78d07.js"><link rel="prefetch" href="/web-vue2x/assets/js/139.d04f333a.js"><link rel="prefetch" href="/web-vue2x/assets/js/14.7602145c.js"><link rel="prefetch" href="/web-vue2x/assets/js/140.7dfa9737.js"><link rel="prefetch" href="/web-vue2x/assets/js/141.c511a2c8.js"><link rel="prefetch" href="/web-vue2x/assets/js/142.580fd3eb.js"><link rel="prefetch" href="/web-vue2x/assets/js/143.8332566b.js"><link rel="prefetch" href="/web-vue2x/assets/js/144.4a2863b8.js"><link rel="prefetch" href="/web-vue2x/assets/js/145.5ba2bac4.js"><link rel="prefetch" href="/web-vue2x/assets/js/146.a6fb537d.js"><link rel="prefetch" href="/web-vue2x/assets/js/147.9e275adc.js"><link rel="prefetch" href="/web-vue2x/assets/js/148.b256b661.js"><link rel="prefetch" href="/web-vue2x/assets/js/149.b510e652.js"><link rel="prefetch" href="/web-vue2x/assets/js/15.22464661.js"><link rel="prefetch" href="/web-vue2x/assets/js/150.4cefcf30.js"><link rel="prefetch" href="/web-vue2x/assets/js/151.b03d8409.js"><link rel="prefetch" href="/web-vue2x/assets/js/152.2d473bf7.js"><link rel="prefetch" href="/web-vue2x/assets/js/153.97256132.js"><link rel="prefetch" href="/web-vue2x/assets/js/154.ff2a4978.js"><link rel="prefetch" href="/web-vue2x/assets/js/16.a4858520.js"><link rel="prefetch" href="/web-vue2x/assets/js/17.b70fe539.js"><link rel="prefetch" href="/web-vue2x/assets/js/18.a4416265.js"><link rel="prefetch" href="/web-vue2x/assets/js/19.7d7b73f4.js"><link rel="prefetch" href="/web-vue2x/assets/js/20.6e729abb.js"><link rel="prefetch" href="/web-vue2x/assets/js/21.8ae76fd4.js"><link rel="prefetch" href="/web-vue2x/assets/js/22.a0332fb1.js"><link rel="prefetch" href="/web-vue2x/assets/js/23.e18cff4d.js"><link rel="prefetch" href="/web-vue2x/assets/js/24.2ddbfe5f.js"><link rel="prefetch" href="/web-vue2x/assets/js/25.bcbb1f57.js"><link rel="prefetch" href="/web-vue2x/assets/js/26.87fbf205.js"><link rel="prefetch" href="/web-vue2x/assets/js/27.c8a3ebf2.js"><link rel="prefetch" href="/web-vue2x/assets/js/28.a0e68185.js"><link rel="prefetch" href="/web-vue2x/assets/js/29.fe4aef86.js"><link rel="prefetch" href="/web-vue2x/assets/js/3.303234cf.js"><link rel="prefetch" href="/web-vue2x/assets/js/30.9280fb82.js"><link rel="prefetch" href="/web-vue2x/assets/js/31.fd729a79.js"><link rel="prefetch" href="/web-vue2x/assets/js/32.1db44be1.js"><link rel="prefetch" href="/web-vue2x/assets/js/33.5f9927aa.js"><link rel="prefetch" href="/web-vue2x/assets/js/34.90039cd3.js"><link rel="prefetch" href="/web-vue2x/assets/js/35.cf3d37e1.js"><link rel="prefetch" href="/web-vue2x/assets/js/36.e398e0b6.js"><link rel="prefetch" href="/web-vue2x/assets/js/37.104f3191.js"><link rel="prefetch" href="/web-vue2x/assets/js/39.7ce1053f.js"><link rel="prefetch" href="/web-vue2x/assets/js/4.8df594d6.js"><link rel="prefetch" href="/web-vue2x/assets/js/40.202f6dd8.js"><link rel="prefetch" href="/web-vue2x/assets/js/41.e04a8692.js"><link rel="prefetch" href="/web-vue2x/assets/js/42.235b8d33.js"><link rel="prefetch" href="/web-vue2x/assets/js/43.09f3d4da.js"><link rel="prefetch" href="/web-vue2x/assets/js/44.453f75e6.js"><link rel="prefetch" href="/web-vue2x/assets/js/45.02126fc5.js"><link rel="prefetch" href="/web-vue2x/assets/js/46.e239c1c8.js"><link rel="prefetch" href="/web-vue2x/assets/js/47.ce8cf73d.js"><link rel="prefetch" href="/web-vue2x/assets/js/48.a880a7e8.js"><link rel="prefetch" href="/web-vue2x/assets/js/49.5c44d0c1.js"><link rel="prefetch" href="/web-vue2x/assets/js/5.b882b7ca.js"><link rel="prefetch" href="/web-vue2x/assets/js/50.3550b421.js"><link rel="prefetch" href="/web-vue2x/assets/js/51.ac0004c6.js"><link rel="prefetch" href="/web-vue2x/assets/js/52.a0a188cd.js"><link rel="prefetch" href="/web-vue2x/assets/js/53.52f6600d.js"><link rel="prefetch" href="/web-vue2x/assets/js/54.7bcd13a7.js"><link rel="prefetch" href="/web-vue2x/assets/js/55.7ef7be76.js"><link rel="prefetch" href="/web-vue2x/assets/js/56.0366a04e.js"><link rel="prefetch" href="/web-vue2x/assets/js/57.590c0031.js"><link rel="prefetch" href="/web-vue2x/assets/js/58.42160dd1.js"><link rel="prefetch" href="/web-vue2x/assets/js/59.0bd58262.js"><link rel="prefetch" href="/web-vue2x/assets/js/6.0ec87a34.js"><link rel="prefetch" href="/web-vue2x/assets/js/60.8859d793.js"><link rel="prefetch" href="/web-vue2x/assets/js/61.39960072.js"><link rel="prefetch" href="/web-vue2x/assets/js/62.3fb17244.js"><link rel="prefetch" href="/web-vue2x/assets/js/63.9454ab3b.js"><link rel="prefetch" href="/web-vue2x/assets/js/64.2065227d.js"><link rel="prefetch" href="/web-vue2x/assets/js/65.41064ba4.js"><link rel="prefetch" href="/web-vue2x/assets/js/66.4d6afba1.js"><link rel="prefetch" href="/web-vue2x/assets/js/67.3f33344c.js"><link rel="prefetch" href="/web-vue2x/assets/js/68.3dc04620.js"><link rel="prefetch" href="/web-vue2x/assets/js/69.fbcbba44.js"><link rel="prefetch" href="/web-vue2x/assets/js/7.d06124ac.js"><link rel="prefetch" href="/web-vue2x/assets/js/70.8de0c361.js"><link rel="prefetch" href="/web-vue2x/assets/js/71.5352e66d.js"><link rel="prefetch" href="/web-vue2x/assets/js/72.325eaa99.js"><link rel="prefetch" href="/web-vue2x/assets/js/73.2f9e7e23.js"><link rel="prefetch" href="/web-vue2x/assets/js/74.30ebdb72.js"><link rel="prefetch" href="/web-vue2x/assets/js/75.d59a59c5.js"><link rel="prefetch" href="/web-vue2x/assets/js/76.958057f6.js"><link rel="prefetch" href="/web-vue2x/assets/js/77.2430bd1b.js"><link rel="prefetch" href="/web-vue2x/assets/js/78.8911ee76.js"><link rel="prefetch" href="/web-vue2x/assets/js/79.6cf2fc65.js"><link rel="prefetch" href="/web-vue2x/assets/js/8.d2d6dfbe.js"><link rel="prefetch" href="/web-vue2x/assets/js/80.57ce7b86.js"><link rel="prefetch" href="/web-vue2x/assets/js/81.6b4e501a.js"><link rel="prefetch" href="/web-vue2x/assets/js/82.5bd2a7b6.js"><link rel="prefetch" href="/web-vue2x/assets/js/83.aff1d7c4.js"><link rel="prefetch" href="/web-vue2x/assets/js/84.18997946.js"><link rel="prefetch" href="/web-vue2x/assets/js/85.a1c5879f.js"><link rel="prefetch" href="/web-vue2x/assets/js/86.02b388ea.js"><link rel="prefetch" href="/web-vue2x/assets/js/87.ba4b0404.js"><link rel="prefetch" href="/web-vue2x/assets/js/88.51446736.js"><link rel="prefetch" href="/web-vue2x/assets/js/89.ba841d04.js"><link rel="prefetch" href="/web-vue2x/assets/js/9.b3183e1f.js"><link rel="prefetch" href="/web-vue2x/assets/js/90.308bae8c.js"><link rel="prefetch" href="/web-vue2x/assets/js/91.cbb2875a.js"><link rel="prefetch" href="/web-vue2x/assets/js/92.e8eaaba0.js"><link rel="prefetch" href="/web-vue2x/assets/js/93.5c4335be.js"><link rel="prefetch" href="/web-vue2x/assets/js/94.c077d4f8.js"><link rel="prefetch" href="/web-vue2x/assets/js/95.5bbb0b66.js"><link rel="prefetch" href="/web-vue2x/assets/js/96.38ebcad6.js"><link rel="prefetch" href="/web-vue2x/assets/js/97.3bb31df9.js"><link rel="prefetch" href="/web-vue2x/assets/js/98.63d818c7.js"><link rel="prefetch" href="/web-vue2x/assets/js/99.dc3fd81b.js">
    <link rel="stylesheet" href="/web-vue2x/assets/css/0.styles.d48c8f36.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-vue2x/" class="home-link router-link-active"><!----> <span class="site-name">Vue2.x学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-vue2x/base/engine/1.index.html" class="nav-link">
  一.Vue 的工程化
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/base/project/1.index.html" class="nav-link">
  二.Vue 功能模块
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/base/vue2.x/1.index.html" class="nav-link">
  三.Vue2.x全家桶
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高级知识" class="dropdown-title"><span class="title">高级知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="高级知识" class="mobile-dropdown-title"><span class="title">高级知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-vue2x/senior/1.mobile/1.index.html" class="nav-link">
  一.移动端规范
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/senior/2.browser/1.index.html" class="nav-link">
  二.网页端规范
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/senior/3.component/1.index.html" class="nav-link">
  三.组件开发
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue 2.x源码" class="dropdown-title"><span class="title">Vue 2.x源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue 2.x源码" class="mobile-dropdown-title"><span class="title">Vue 2.x源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-vue2x/source/vue-cli2.x/1.index.html" class="nav-link">
  一.Vue/cli2.x
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/source/vue2.x/1.index.html" class="nav-link">
  二.Vue 2.x
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/source/vue-router3.x/1.index.html" class="nav-link">
  三.Vue-Router3.x
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/source/vuex3.x/1.index.html" class="nav-link">
  四.Vuex3.x
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/source/1.micro/1.index.html" class="nav-link">
  五.Vue微前端
</a></li></ul></div></div><div class="nav-item"><a href="/web-vue2x/read.html" class="nav-link">
  Vue资料
</a></div> <a href="https://github.com/zhoubichuan/web-vue2x" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-vue2x/base/engine/1.index.html" class="nav-link">
  一.Vue 的工程化
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/base/project/1.index.html" class="nav-link">
  二.Vue 功能模块
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/base/vue2.x/1.index.html" class="nav-link">
  三.Vue2.x全家桶
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高级知识" class="dropdown-title"><span class="title">高级知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="高级知识" class="mobile-dropdown-title"><span class="title">高级知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-vue2x/senior/1.mobile/1.index.html" class="nav-link">
  一.移动端规范
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/senior/2.browser/1.index.html" class="nav-link">
  二.网页端规范
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/senior/3.component/1.index.html" class="nav-link">
  三.组件开发
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue 2.x源码" class="dropdown-title"><span class="title">Vue 2.x源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue 2.x源码" class="mobile-dropdown-title"><span class="title">Vue 2.x源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-vue2x/source/vue-cli2.x/1.index.html" class="nav-link">
  一.Vue/cli2.x
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/source/vue2.x/1.index.html" class="nav-link">
  二.Vue 2.x
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/source/vue-router3.x/1.index.html" class="nav-link">
  三.Vue-Router3.x
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/source/vuex3.x/1.index.html" class="nav-link">
  四.Vuex3.x
</a></li><li class="dropdown-item"><!----> <a href="/web-vue2x/source/1.micro/1.index.html" class="nav-link">
  五.Vue微前端
</a></li></ul></div></div><div class="nav-item"><a href="/web-vue2x/read.html" class="nav-link">
  Vue资料
</a></div> <a href="https://github.com/zhoubichuan/web-vue2x" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/web-vue2x/base/engine/1.index.html" class="sidebar-link">Vue 的工程化流程</a></li><li><a href="/web-vue2x/base/engine/1.utils.html" class="sidebar-link">初始化（开发工具）</a></li><li><a href="/web-vue2x/base/engine/2.project.html" class="sidebar-link">初始化（创建项目）</a></li><li><a href="/web-vue2x/base/engine/3.vuecli.html" class="sidebar-link">初始化（VueCLI 配置）</a></li><li><a href="/web-vue2x/base/engine/4.env.html" class="sidebar-link">初始化（环境配置）</a></li><li><a href="/web-vue2x/base/engine/5.ui.html" class="sidebar-link">初始化（UI 框架）</a></li><li><a href="/web-vue2x/base/engine/6.layout.html" class="sidebar-link">静态页面（页面布局）</a></li><li><a href="/web-vue2x/base/engine/7.single.html" class="sidebar-link">静态页面（单页应用）</a></li><li><a href="/web-vue2x/base/engine/8.page.html" class="sidebar-link">静态页面（多页应用）</a></li><li><a href="/web-vue2x/base/engine/9.module.html" class="sidebar-link">静态页面（模板解析）</a></li><li><a href="/web-vue2x/base/engine/10.skill.html" aria-current="page" class="active sidebar-link">静态页面（编码技巧）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_1-条件判断" class="sidebar-link">1.条件判断</a></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_2-生成数组" class="sidebar-link">2.生成数组</a></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_3-按需加载" class="sidebar-link">3.按需加载</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_3-1-路由按需加载" class="sidebar-link">3.1 路由按需加载</a></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_3-2-页面组件按需加载" class="sidebar-link">3.2 页面组件按需加载</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_4-按需渲染" class="sidebar-link">4.按需渲染</a></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_5-路由跳转" class="sidebar-link">5.路由跳转</a></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_6-全局混入" class="sidebar-link">6.全局混入</a></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_7-computed" class="sidebar-link">7.computed</a></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_8-枚举字段" class="sidebar-link">8.枚举字段</a></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_9-setinterval-问题" class="sidebar-link">9.setInterval 问题</a></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_10-for-in-问题" class="sidebar-link">10.for in 问题</a></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_11-清除定时器" class="sidebar-link">11.清除定时器</a></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_12-复用代码" class="sidebar-link">12.复用代码</a></li><li class="sidebar-sub-header"><a href="/web-vue2x/base/engine/10.skill.html#_11-require-context" class="sidebar-link">11.require.context</a></li></ul></li><li><a href="/web-vue2x/base/engine/11.mock.html" class="sidebar-link">接口联调（Mock 数据）</a></li><li><a href="/web-vue2x/base/engine/12.optimization.html" class="sidebar-link">性能优化</a></li><li><a href="/web-vue2x/base/engine/13.code.html" class="sidebar-link">代码管理</a></li><li><a href="/web-vue2x/base/engine/14.deploy.html" class="sidebar-link">项目部署</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="静态页面-编码技巧"><a href="#静态页面-编码技巧" class="header-anchor">#</a> 静态页面（编码技巧）</h1> <div class="custom-block tip"><p class="custom-block-title">前言</p> <p>总结一些开发中常见的问题，优化改善编码技巧，提高代码质量</p></div> <h2 id="_1-条件判断"><a href="#_1-条件判断" class="header-anchor">#</a> 1.条件判断</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1.if/else 判断</span>
<span class="token comment">// let name = &quot;case1&quot;</span>
<span class="token comment">// if (name === &quot;case1&quot;) {</span>
<span class="token comment">// // 执行逻辑1</span>
<span class="token comment">// } else if (name === &quot;case2&quot;) {</span>
<span class="token comment">// // 执行逻辑2</span>
<span class="token comment">// } else if (name === &quot;case3&quot;) {</span>
<span class="token comment">// // 执行逻辑3</span>
<span class="token comment">// }</span>

<span class="token comment">// 2.switch/case 判断</span>
<span class="token comment">// switch (name) {</span>
<span class="token comment">// case &quot;case1&quot;:</span>
<span class="token comment">//     // 执行逻辑1</span>
<span class="token comment">//     break</span>
<span class="token comment">// case &quot;case2&quot;:</span>
<span class="token comment">//     // 执行逻辑2</span>
<span class="token comment">//     break</span>
<span class="token comment">// case &quot;case3&quot;:</span>
<span class="token comment">//     // 执行逻辑3</span>
<span class="token comment">//     break</span>
<span class="token comment">// }</span>

<span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">&quot;case2&quot;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">case1</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 执行逻辑1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">case2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 执行逻辑2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">case3</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 执行逻辑3</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> age <span class="token operator">=</span> obj<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p>以上这种技巧适用于循环判断一次赋值的情况，如果判断过后有较多处理逻辑的还需要使用 if 或 switch 等方法。</p></div> <h2 id="_2-生成数组"><a href="#_2-生成数组" class="header-anchor">#</a> 2.生成数组</h2> <ul><li><p>Array.from</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// let hours = []</span>
<span class="token comment">// for (let i = 0; i &lt; 24; i++) {</span>
<span class="token comment">//   hours.push(i + &quot;时&quot;)</span>
<span class="token comment">// }</span>
<span class="token comment">// [&quot;0时&quot;, &quot;1时&quot;, &quot;2时&quot;, &quot;3时&quot;, &quot;4时&quot;, &quot;5时&quot;, &quot;6时&quot;, &quot;7时&quot;, &quot;8时&quot;, &quot;9时&quot;, …]</span>

<span class="token keyword">let</span> hours <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> index <span class="token operator">+</span> <span class="token string">&quot;时&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// [&quot;0时&quot;, &quot;1时&quot;, &quot;2时&quot;, &quot;3时&quot;, &quot;4时&quot;, &quot;5时&quot;, &quot;6时&quot;, &quot;7时&quot;, &quot;8时&quot;, &quot;9时&quot;, …]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul> <h2 id="_3-按需加载"><a href="#_3-按需加载" class="header-anchor">#</a> 3.按需加载</h2> <h3 id="_3-1-路由按需加载"><a href="#_3-1-路由按需加载" class="header-anchor">#</a> 3.1 路由按需加载</h3> <ul><li><p>常见加载页面方式</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token comment">// import home from'@/page/index/index'</span>
<span class="token operator">...</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/index'</span><span class="token punctuation">,</span>
  <span class="token comment">// component: home,</span>
  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/page/index/index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 推荐使用异步方式按需加载</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'首页'</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul> <h3 id="_3-2-页面组件按需加载"><a href="#_3-2-页面组件按需加载" class="header-anchor">#</a> 3.2 页面组件按需加载</h3> <p>页面中按需加载组件（可结合<code>component</code>）</p> <h2 id="_4-按需渲染"><a href="#_4-按需渲染" class="header-anchor">#</a> 4.按需渲染</h2> <p>在 Vue 页面中，一些模块可能需要用户主动触发才会显示，比如弹框组件等这样的子组件，那么我们可以使用 <code>v-if</code> 来进行按需渲染，没必要一进页面就渲染所有模块</p> <h2 id="_5-路由跳转"><a href="#_5-路由跳转" class="header-anchor">#</a> 5.路由跳转</h2> <div class="custom-block danger"><p class="custom-block-title">不推荐</p> <ul><li><p>直接调用原生 js API，会导致跳转到加载过的页面每次都是重新加载</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;/home&quot;</span>
location<span class="token punctuation">.</span>hash <span class="token operator">=</span> <span class="token string">&quot;/home&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></div> <ul><li><p>vue 中可以使用<code>path</code>：优于以上方式，当路径不变，路由方式修改不会影响跳转结果</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;home&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;home&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <div class="custom-block tip"><p class="custom-block-title">推荐</p> <ul><li><p>使用<code>name</code>: 对于 path，name 使用起来就方便多了，因为其具有唯一性，即使我们修改了 path，还可以使用原来的 <code>name</code> 值进行跳转</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;home&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></div> <h2 id="_6-全局混入"><a href="#_6-全局混入" class="header-anchor">#</a> 6.全局混入</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是全局mixin&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_7-computed"><a href="#_7-computed" class="header-anchor">#</a> 7.computed</h2> <p>尽量使用 computed 代替 watch，computed 可以理解为懒加载版的 watch,使用 computed 可以提高性能</p> <h2 id="_8-枚举字段"><a href="#_8-枚举字段" class="header-anchor">#</a> 8.枚举字段</h2> <ul><li><p>常见项目一些变量像全局变量一样散落在项目的各个地方，难以管理</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>localStorage<span class="token punctuation">.</span>token <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span> <span class="token comment">// a.page</span>
localStorage<span class="token punctuation">.</span>token <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span> <span class="token comment">// b.page</span>
localStorage<span class="token punctuation">.</span>token <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span> <span class="token comment">// c.page</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">推荐</p> <ul><li><p>定义枚举字段</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// types.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">USER_NAME</span> <span class="token operator">=</span> <span class="token string">&quot;userName&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">TOKEN</span> <span class="token operator">=</span> <span class="token string">&quot;token&quot;</span> <span class="token comment">// 当需要修改变量名（token）时，直接修改文件中的值即可，无需修改使用它的页面，同时这也可以避免命名冲突等问题的出现</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>引用枚举字段</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">USER_NAME</span><span class="token punctuation">,</span> <span class="token constant">TOKEN</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../types.js&quot;</span>
sessionStorage<span class="token punctuation">[</span><span class="token constant">USER_NAME</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span>
localStorage<span class="token punctuation">[</span><span class="token constant">TOKEN</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></div></li></ul> <details class="custom-block details"><summary>枚举用法的扩展-位运算</summary> <ul><li>定义</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">SKILLS</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">CSS</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token constant">JS</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token constant">HTML</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token constant">WEB_GL</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> skills <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">function</span> <span class="token function">addSkill</span><span class="token punctuation">(</span><span class="token parameter">skill</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  skills <span class="token operator">=</span> skills <span class="token operator">|</span> skill
<span class="token punctuation">}</span>
<span class="token function">addSkill</span><span class="token punctuation">(</span><span class="token constant">SKILLS</span><span class="token punctuation">.</span><span class="token constant">CSS</span><span class="token punctuation">)</span>
<span class="token function">addSkill</span><span class="token punctuation">(</span><span class="token constant">SKILLS</span><span class="token punctuation">.</span><span class="token constant">HTML</span><span class="token punctuation">)</span>
<span class="token function">addSkill</span><span class="token punctuation">(</span><span class="token constant">SKILLS</span><span class="token punctuation">.</span><span class="token constant">WEB_GL</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>使用</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">SKILLS</span><span class="token punctuation">.</span><span class="token constant">CSS</span> <span class="token operator">&amp;</span> skills <span class="token comment">// 判断是否有css</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></details> <h2 id="_9-setinterval-问题"><a href="#_9-setinterval-问题" class="header-anchor">#</a> 9.setInterval 问题</h2> <p>一般情况下我们在项目里不建议使用 <code>setInterval</code>，因为其会存在代码的执行间隔比预期小以及 “丢帧” 的现象，原因在于其本身的实现逻辑。很多人会认为 setInterval 中第二个时间参数的作用是经过该毫秒数执行回调方法，其实不然，其真正的作用是<strong>经过该毫秒数将回调方法放置到队列中去</strong>，但是如果队列中存在正在执行的方法，其会等待之前的方法完毕再执行，如果存在还未执行的代码实例，其不会插入到队列中去，也就产生了 “丢帧”。</p> <p>而 setTimeout 并不会出现这样的现象，因为每一次调用都会产生了一个新定时器，同时在前一个定时器代码执行完之前，不会向队列插入新的定时器代码。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 该定时器实际会在 3s 后立即触发下一次回调</span>
  <span class="token comment">// 执行完这里的代码需要 2s</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token function-variable function">doSometing</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用 setTimeout 改写，4秒后触发下一次回调</span>
  <span class="token comment">// 执行完这里的代码需要 2s</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>doSometing<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">doSometing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_10-for-in-问题"><a href="#_10-for-in-问题" class="header-anchor">#</a> 10.for in 问题</h2> <ul><li><p>常规操作没有问题</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 会正常打印 1, 2</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <ul><li>添加自定义属性，会有问题</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 在 Array 原型链上添加一个方法</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 此时会打印 1, 2, ƒ () {}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>因为我们不能保证项目代码中不会对数组原型链进行操作，也不能保证引入的第三方库不对其进行操作，所以不要使用 for in 循环来遍历数组。</p></div></li></ul> <h2 id="_11-清除定时器"><a href="#_11-清除定时器" class="header-anchor">#</a> 11.清除定时器</h2> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>秒：{{ time }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
      <span class="token comment">// 方式一</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&quot;hooks:beforeDestory&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// 方式二</span>
      <span class="token comment">// this.$on(&quot;hooks:destoryed&quot;, () =&gt; {</span>
      <span class="token comment">//   clearInterval(timer);</span>
      <span class="token comment">//   timer = null;</span>
      <span class="token comment">// });</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="_12-复用代码"><a href="#_12-复用代码" class="header-anchor">#</a> 12.复用代码</h2> <p>在 Vue 中，页面都可以看作是由大大小小的模块构成的，即便是一行代码、一个函数、一个组件都可以看作是一个个自由的模块。那么提高代码的复用性的关键便在于编写可复用的模块，也就是编写可复用的代码、函数和组件等。</p> <ul><li><p>使用变量的赋值缓存使用来解决数据的重复</p> <blockquote><div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>obj<span class="token punctuation">.</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  person<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> data<span class="token punctuation">.</span>obj<span class="token punctuation">.</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token comment">// 出现了重复性的代码片段 data.obj.items</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> data<span class="token punctuation">.</span>obj<span class="token punctuation">.</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>age<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>上述代码一旦需要修改变量 <code>items</code> 为 <code>lists</code>，那么我们就得修改 3 处地方，不知不觉就增加了维护成本</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> values <span class="token operator">=</span> data<span class="token punctuation">.</span>obj<span class="token punctuation">.</span>items <span class="token comment">// 通过变量 values 实现了复用，不管是维护成本还是代码可读性上，复用的优势都显而易见</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  person<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> values<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> values<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>age<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></blockquote></li> <li><p>使用公共方法来解决功能的重复</p> <blockquote><div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token operator">&lt;</span>tempalte<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;str1&quot;</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;str2&quot;</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> str1<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> str2<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token comment">// toUpperCase，大写字母转化功能点的重复</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>重复书写相同功能的代码是一种不经过大脑思考的行为，我们需要对其进行优化，这里我们可以把功能点封装成一个函数,在用到该方法的地方调用即可</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">sliceUpperCase</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></blockquote> <p>像在双花括号插值和 v-bind 表达式中重复的功能点，我们可以封装成过滤器使用更加合适</p> <blockquote><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 单文件组件注册过滤器</span>
<span class="token literal-property property">filters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token function">sliceUpperCase</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 全局注册过滤器</span>
Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">'sliceUpperCase'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>然后在 模板 中使用“管道”符进行过滤：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> str1 <span class="token operator">|</span> toUpperCase <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> str2 <span class="token operator">|</span> toUpperCase <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></blockquote> <p>这样我们就把重复的功能性代码封装成了函数，而不管是过滤器还是正常的方法封装，其本质都是函数的封装。</p></li> <li><p>组件封装</p> <p>相比较于函数的封装，规模更大一点的便是组件的封装，组件包含了模板、脚本以及样式的代码，在实际开发中组件的使用频率也是非常大的，我们项目中的每一个页面其实都可以看作是一个父组件，其可以包含很多子组件，子组件通过接收父组件的值来渲染页面，父组件通过响应子组件的回调来触发事件。</p> <p>封装一个组件主要包含两种方式，一种是最常见的整体封装，用户通过改变数据源来呈现不同的页面状态，代码结构不可定制化。例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>my<span class="token operator">-</span>component data<span class="token operator">=</span><span class="token string">&quot;我是父组件传入子组件的数据&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>component<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>另一种便是自定义封装，也就是插槽(slot)，我们可以开放一部分槽位给父组件，使其能够进行一定程度的定制化，例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>my<span class="token operator">-</span>component data<span class="token operator">=</span><span class="token string">&quot;我是父组件传入子组件的数据&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">&quot;customize&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>这是定制化的数据<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>component<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在 myComponent 组件中我们便可以接收对应的 slot：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;customize&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这里我们通过定义 slot 标签的 name 值为 customize 来接收父组件在使用该组件时在 template 标签上定义的 slot=&quot;customize&quot; 中的代码，不同父组件可以定制不同的 slot 代码来实现差异化的插槽。最终渲染出来的代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>我是父组件传入子组件的数据<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>这是定制化的数据<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这样我们就完成了一个小型组件的封装，将共用代码封装到组件中去，页面需要引入的时候直接使用 import 并进行相应注册即可，当然你也可以进行全局的引入：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> myComponent <span class="token keyword">from</span> <span class="token string">&quot;../myComponent.vue&quot;</span>
<span class="token comment">// 全局</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;my-component&quot;</span><span class="token punctuation">,</span> myComponent<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>插件封装</p> <p>在某些情况下，我们封装的内容可能不需要使用者对其内部代码结构进行了解，其只需要熟悉我们提供出来的相应方法和 api 即可，这需要我们更系统性的将公用部分逻辑封装成插件，来为项目添加全局功能，比如常见的 loading 功能、弹框功能等。</p> <blockquote><p>编写插件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* toast.js */</span>
<span class="token keyword">import</span> ToastComponent <span class="token keyword">from</span> <span class="token string">&quot;./toast.vue&quot;</span> <span class="token comment">// 引入组件</span>
<span class="token keyword">let</span> $vm
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">Vue<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>$vm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> ToastPlugin <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>ToastComponent<span class="token punctuation">)</span> <span class="token comment">// 创建一个“扩展实例构造器”</span>
      $vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ToastPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">el</span><span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 声明挂载元素</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>$vm<span class="token punctuation">.</span>$el<span class="token punctuation">)</span> <span class="token comment">// 把 toast 组件的 DOM 添加到 body 里</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> <span class="token function-variable function">toast</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> duration</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 给 toast 设置自定义文案和时间</span>
      $vm<span class="token punctuation">.</span>text <span class="token operator">=</span> text
      $vm<span class="token punctuation">.</span>duration <span class="token operator">=</span> duration
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在指定 duration 之后让 toast 消失</span>
        $vm<span class="token punctuation">.</span>isShow <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> $vm<span class="token punctuation">.</span>duration<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Vue<span class="token punctuation">.</span>$toast<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 判断 Vue.$toast 是否存在</span>
      Vue<span class="token punctuation">.</span>$toast <span class="token operator">=</span> toast
    <span class="token punctuation">}</span>
    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$toast <span class="token operator">=</span> Vue<span class="token punctuation">.</span>$toast <span class="token comment">// 全局添加 $toast 事件</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>注册插件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Toast <span class="token keyword">from</span> <span class="token string">&quot;@/widgets/toast/toast.js&quot;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Toast<span class="token punctuation">)</span> <span class="token comment">// 注册 Toast</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用插件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$toast</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote> <p>当然你也可以不使用 install 方法来编写插件，直接采用导出一个封装好的实例方法并将其挂载到 Vue 的原型链上来实现相同的功能。</p></li></ul> <h2 id="_11-require-context"><a href="#_11-require-context" class="header-anchor">#</a> 11.require.context</h2> <ul><li>批量导入组件</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> files <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&quot;@/components&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
files<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">&quot;.vue&quot;</span><span class="token punctuation">)</span>
  modules<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">files</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span>default <span class="token operator">||</span> <span class="token function">files</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token literal-property property">components</span><span class="token operator">:</span> modules
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>require.context(directory,useSubdirectories,regExp)</li> <li>接收三个参数:
<ul><li>directory：说明需要检索的目录</li> <li>useSubdirectories：是否检索子目录</li> <li>regExp: 匹配文件的正则表达式,一般是文件名</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">总结</p> <p>掌握一些常见的 vue 开发技巧，写出更规范的代码</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zhoubichuan/web-vue2x/edit/master/src/base/engine/10.skill.md" target="_blank" rel="noopener noreferrer">在github上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/5/13下午4:10:13</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web-vue2x/base/engine/9.module.html" class="prev">
        静态页面（模板解析）
      </a></span> <span class="next"><a href="/web-vue2x/base/engine/11.mock.html">
        接口联调（Mock 数据）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/web-vue2x/assets/js/app.d33bf4a8.js" defer></script><script src="/web-vue2x/assets/js/2.3759f209.js" defer></script><script src="/web-vue2x/assets/js/38.eef657f2.js" defer></script><script src="/web-vue2x/assets/js/10.ac4b1276.js" defer></script>
  </body>
</html>
